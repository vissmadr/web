<!doctype html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./typescript.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sandbox</title>
    <style>
      body {
        background-color: #252525;
      }
    </style>
    <script type="module" crossorigin>var qt=Object.defineProperty;var Wt=(t,n,s)=>n in t?qt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var M=(t,n,s)=>Wt(t,typeof n!="symbol"?n+"":n,s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const h of a)if(h.type==="childList")for(const r of h.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(a){const h={};return a.integrity&&(h.integrity=a.integrity),a.referrerPolicy&&(h.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?h.credentials="include":a.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(a){if(a.ep)return;a.ep=!0;const h=s(a);fetch(a.href,h)}})();class b{constructor(n,s){this.x=n,this.y=s}get r(){return this.x}get g(){return this.y}set r(n){this.x=n}set g(n){this.y=n}clone(){return new b(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}set(n,s){return this.x=n,this.y=s,this}add(n){return this.x+=n.x,this.y+=n.y,this}increase(n,s){return this.x+=n,this.y+=s,this}subtract(n){return this.x-=n.x,this.y-=n.y,this}decrease(n,s){return this.x-=n,this.y-=s,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}scale(n){return this.x*=n,this.y*=n,this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}magnitudeSquared(){return this.x*this.x+this.y*this.y}magnitude(){return Math.sqrt(this.magnitudeSquared())}normalize(){const n=this.magnitude();return n>0&&(this.x/=n,this.y/=n),this}toString(){return`(${this.x}, ${this.y})`}}(t=>{(i=>{function c(){return new t(0,0)}i.zero=c;function f(){return new t(1,1)}i.one=f;function y(){return new t(1/0,1/0)}i.infinity=y;function p(){return new t(Math.random(),Math.random())}i.random=p;const g=.7071067811865476;function _(){return new t(0,1)}i.north=_;function S(){return new t(g,g)}i.northEast=S;function N(){return new t(1,0)}i.east=N;function A(){return new t(g,-g)}i.southEast=A;function G(){return new t(0,-1)}i.south=G;function U(){return new t(-g,-g)}i.southWest=U;function Y(){return new t(-1,0)}i.west=Y;function j(){return new t(-g,g)}i.northWest=j})(t.Create||(t.Create={}));function n(i){return new t(i.x,i.y)}t.clone=n;function s(i,c){return new t(i.x+c.x,i.y+c.y)}t.add=s;function o(i,c){return new t(i.x-c.x,i.y-c.y)}t.subtract=o;function a(i,c){return new t(i.x*c.x,i.y*c.y)}t.multiply=a;function h(i,c){return new t(i.x/c.x,i.y/c.y)}t.divide=h;function r(i,c){const f=i.x-c.x,y=i.y-c.y;return f*f+y*y}t.distanceSquared=r;function l(i,c){return Math.sqrt(r(i,c))}t.distance=l;function d(i,c){const f=i.x-c.x,y=i.y-c.y;return Math.max(Math.abs(f),Math.abs(y))}t.chebyshevDistance=d;function u(i,c){return i.x*c.x+i.y*c.y}t.dot=u;function e(i,c,f){return new t(i.x+f*(c.x-i.x),i.y+f*(c.y-i.y))}t.lerp=e})(b||(b={}));class L{constructor(n,s,o){this.x=n,this.y=s,this.z=o}get r(){return this.x}get g(){return this.y}get b(){return this.z}set r(n){this.x=n}set g(n){this.y=n}set b(n){this.z=n}clone(){return new L(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}set(n,s,o){return this.x=n,this.y=s,this.z=o,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this}increase(n,s,o){return this.x+=n,this.y+=s,this.z+=o,this}subtract(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this}decrease(n,s,o){return this.x-=n,this.y-=s,this.z-=o,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this}scale(n){return this.x*=n,this.y*=n,this.z*=n,this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}magnitudeSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}magnitude(){return Math.sqrt(this.magnitudeSquared())}normalize(){const n=this.magnitude();return n>0&&(this.x/=n,this.y/=n,this.z/=n),this}toString(){return`(${this.x}, ${this.y}, ${this.z})`}}(t=>{(e=>{function i(){return new t(0,0,0)}e.zero=i;function c(){return new t(1,1,1)}e.one=c;function f(){return new t(1/0,1/0,1/0)}e.infinity=f;function y(){return new t(Math.random(),Math.random(),Math.random())}e.random=y})(t.Create||(t.Create={}));function n(e){return new t(e.x,e.y,e.z)}t.clone=n;function s(e,i){return new t(e.x+i.x,e.y+i.y,e.z+i.z)}t.add=s;function o(e,i){return new t(e.x-i.x,e.y-i.y,e.z-i.z)}t.subtract=o;function a(e,i){return new t(e.x*i.x,e.y*i.y,e.z*i.z)}t.multiply=a;function h(e,i){return new t(e.x/i.x,e.y/i.y,e.z/i.z)}t.divide=h;function r(e,i){const c=e.x-i.x,f=e.y-i.y,y=e.z-i.z;return c*c+f*f+y*y}t.distanceSquared=r;function l(e,i){return Math.sqrt(r(e,i))}t.distance=l;function d(e,i){return e.x*i.x+e.y*i.y+e.z*i.z}t.dot=d;function u(e,i,c){return new t(e.x+c*(i.x-e.x),e.y+c*(i.y-e.y),e.z+c*(i.z-e.z))}t.lerp=u})(L||(L={}));class ${constructor(n,s,o,a){this.x=n,this.y=s,this.z=o,this.w=a}get r(){return this.x}get g(){return this.y}get b(){return this.z}get a(){return this.w}set r(n){this.x=n}set g(n){this.y=n}set b(n){this.z=n}set a(n){this.w=n}clone(){return new $(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w,this}set(n,s,o,a){return this.x=n,this.y=s,this.z=o,this.w=a,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this}increase(n,s,o,a){return this.x+=n,this.y+=s,this.z+=o,this.w+=a,this}subtract(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}decrease(n,s,o,a){return this.x-=n,this.y-=s,this.z-=o,this.w-=a,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}scale(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this.w=Math.abs(this.w),this}magnitudeSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}magnitude(){return Math.sqrt(this.magnitudeSquared())}normalize(){const n=this.magnitude();return n>0&&(this.x/=n,this.y/=n,this.z/=n,this.w/=n),this}toString(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`}}(t=>{(e=>{function i(){return new t(0,0,0,0)}e.zero=i;function c(){return new t(1,1,1,1)}e.one=c;function f(){return new t(1/0,1/0,1/0,1/0)}e.infinity=f;function y(){return new t(Math.random(),Math.random(),Math.random(),Math.random())}e.random=y})(t.Create||(t.Create={}));function n(e){return new t(e.x,e.y,e.z,e.w)}t.clone=n;function s(e,i){return new t(e.x+i.x,e.y+i.y,e.z+i.z,e.w+i.w)}t.add=s;function o(e,i){return new t(e.x-i.x,e.y-i.y,e.z-i.z,e.w-i.w)}t.subtract=o;function a(e,i){return new t(e.x*i.x,e.y*i.y,e.z*i.z,e.w*i.w)}t.multiply=a;function h(e,i){return new t(e.x/i.x,e.y/i.y,e.z/i.z,e.w/i.w)}t.divide=h;function r(e,i){const c=e.x-i.x,f=e.y-i.y,y=e.z-i.z,p=e.w-i.w;return c*c+f*f+y*y+p*p}t.distanceSquared=r;function l(e,i){return Math.sqrt(r(e,i))}t.distance=l;function d(e,i){return e.x*i.x+e.y*i.y+e.z*i.z+e.w*i.w}t.dot=d;function u(e,i,c){return new t(e.x+c*(i.x-e.x),e.y+c*(i.y-e.y),e.z+c*(i.z-e.z),e.w+c*(i.w-e.w))}t.lerp=u})($||($={}));const T=4;class B{constructor(n,s=4){this.container=[],this.divided=!1,this.children=[],this.depth=0,this.rectangle=n,this.capacity=s}get northeast(){return this.children[0]}get southeast(){return this.children[1]}get southwest(){return this.children[2]}get northwest(){return this.children[3]}insert(n){if(!this.isPointInRectangle(n,this.rectangle))return!1;if(!this.divided){if(this.container.length<this.capacity)return this.container.push(n),!0;this.subdivide()}return this.children[0].insert(n)||this.children[1].insert(n)||this.children[2].insert(n)||this.children[3].insert(n)}query(n,s=[]){if(!this.intersects(n))return s;for(let o=0;o<this.container.length;o++){const a=this.container[o];this.isPointInRectangle(a,n)&&s.push(a)}if(this.divided)for(let o=0;o<T;o++)this.children[o].query(n,s);return s}rootRecursion(n){var s;if(n(this),this.divided)for(let o=0;o<T;o++)(s=this.children[o])==null||s.rootRecursion(n)}leafRecursion(n){var s;if(this.divided)for(let o=0;o<T;o++)(s=this.children[o])==null||s.leafRecursion(n);n(this)}reset(){this.container=[],this.data=void 0,this.divided=!1,this.children=[],this.parent=void 0,this.depth=0}subdivide(){this.divided=!0;const n=this.rectangle.x,s=this.rectangle.y,o=this.rectangle.w*.5,a=this.rectangle.h*.5;this.children[0]=new B({x:n+o,y:s,w:o,h:a},this.capacity),this.children[1]=new B({x:n+o,y:s+a,w:o,h:a},this.capacity),this.children[2]=new B({x:n,y:s+a,w:o,h:a},this.capacity),this.children[3]=new B({x:n,y:s,w:o,h:a},this.capacity);for(let h=0;h<T;h++)this.children[h].parent=this,this.children[h].depth=this.depth+1;for(let h=0;h<this.container.length;h++){const r=this.container[h];for(let l=0;l<T&&!this.children[l].insert(r);l++);}this.container=[]}intersects(n){return this.rectangle.x+this.rectangle.w>=n.x&&this.rectangle.x<=n.x+n.w&&this.rectangle.y+this.rectangle.h>=n.y&&this.rectangle.y<=n.y+n.h}isPointInRectangle(n,s){return n.x>=s.x&&n.x<s.x+s.w&&n.y>=s.y&&n.y<s.y+s.h}}function ht(t){return Math.random()<=t}function lt(t,n){return t+Math.random()*(n-t)}function dt(t,n){return Math.floor(lt(t,n))}function Rt(t,n){t.translate(0,n),t.scale(1,-1)}const _t=6.283185307179586;function nt(t,n,s,o){t.beginPath(),t.arc(n,s,o,0,_t),t.stroke()}function C(t,n,s,o){t.beginPath(),t.arc(n,s,o,0,_t),t.fill()}b.Create.zero();const F=1.4142135623730951,Qt=.8660254037844386,Tt=Qt;function et(t,n,s){return t+s*(n-t)}function Pt(t,n,s,o){const a=t-s,h=n-o;return Math.sqrt(a*a+h*h)}function Ut(t,n,s,o){return Math.abs(t-s)+Math.abs(n-o)}const Ft=.3660254037844386,it=.2113248654051871,st=new Float32Array([1,.9807852804032304,.9238795325112867,.8314696123025452,.7071067811865476,.5555702330196023,.38268343236508984,.19509032201612833,0,-.1950903220161282,-.3826834323650897,-.555570233019602,-.7071067811865475,-.8314696123025453,-.9238795325112867,-.9807852804032304,-1,-.9807852804032304,-.9238795325112868,-.8314696123025455,-.7071067811865477,-.5555702330196022,-.38268343236509034,-.19509032201612866,0,.1950903220161283,.38268343236509,.5555702330196018,.7071067811865474,.8314696123025452,.9238795325112865,.9807852804032303]),rt=new Float32Array([0,.19509032201612825,.3826834323650898,.5555702330196022,.7071067811865475,.8314696123025452,.9238795325112867,.9807852804032304,1,.9807852804032304,.9238795325112867,.8314696123025453,.7071067811865476,.5555702330196022,.3826834323650899,.1950903220161286,0,-.19509032201612836,-.38268343236508967,-.555570233019602,-.7071067811865475,-.8314696123025452,-.9238795325112865,-.9807852804032303,-1,-.9807852804032304,-.9238795325112866,-.8314696123025455,-.7071067811865477,-.5555702330196022,-.3826834323650904,-.19509032201612872]),wt=new Uint8Array([9,159,97,66,201,20,105,192,168,220,72,253,5,88,190,162,163,61,129,217,4,194,255,204,115,185,59,33,48,177,200,117,113,248,7,95,133,121,1,176,144,8,127,39,62,193,236,81,244,112,75,51,80,11,70,0,175,60,116,142,102,135,85,137,106,32,13,91,101,232,47,170,229,71,131,86,42,76,100,187,145,240,182,19,53,108,15,87,73,235,130,136,216,41,28,74,155,68,225,183,38,231,156,211,64,228,152,254,46,154,207,212,17,83,150,203,109,50,195,34,251,55,45,215,184,96,16,179,43,208,148,245,138,132,37,164,189,118,181,30,171,18,226,146,230,107,63,78,134,196,44,198,3,93,25,123,158,219,69,124,247,140,103,94,188,57,160,213,98,89,218,153,90,147,6,56,92,122,49,29,214,243,111,139,99,238,173,104,197,202,51,250,205,141,119,166,21,58,234,165,239,77,172,36,2,237,167,110,241,126,210,24,209,233,149,14,224,114,18,227,186,242,174,67,161,65,31,222,40,10,206,143,27,221,22,120,178,246,52,169,249,82,35,84,79,125,54,23,128,199,252,157,223,26,191,12,9,159,97,66,201,20,105,192,168,220,72,253,5,88,190,162,163,61,129,217,4,194,255,204,115,185,59,33,48,177,200,117,113,248,7,95,133,121,1,176,144,8,127,39,62,193,236,81,244,112,75,51,80,11,70,0,175,60,116,142,102,135,85,137,106,32,13,91,101,232,47,170,229,71,131,86,42,76,100,187,145,240,182,19,53,108,15,87,73,235,130,136,216,41,28,74,155,68,225,183,38,231,156,211,64,228,152,254,46,154,207,212,17,83,150,203,109,50,195,34,251,55,45,215,184,96,16,179,43,208,148,245,138,132,37,164,189,118,181,30,171,18,226,146,230,107,63,78,134,196,44,198,3,93,25,123,158,219,69,124,247,140,103,94,188,57,160,213,98,89,218,153,90,147,6,56,92,122,49,29,214,243,111,139,99,238,173,104,197,202,51,250,205,141,119,166,21,58,234,165,239,77,172,36,2,237,167,110,241,126,210,24,209,233,149,14,224,114,18,227,186,242,174,67,161,65,31,222,40,10,206,143,27,221,22,120,178,246,52,169,249,82,35,84,79,125,54,23,128,199,252,157,223,26,191,12]);function ot(t,n){return wt[(t&255)+wt[n&255]]}function Lt(t,n){const s=(t+n)*Ft,o=t+s,a=n+s,h=Math.floor(o)|0,r=Math.floor(a)|0,l=o-h,d=a-r,u=l>d;let e,i;u?(e=1,i=0):(e=0,i=1);const c=h+e,f=r+i,y=h+1,p=r+1,g=(h+r)*it,_=h-g,S=r-g,N=(c+f)*it,A=c-N,G=f-N,U=(y+p)*it,Y=y-U,j=p-U,Z=t-_,J=n-S,K=t-A,v=n-G,V=t-Y,tt=n-j,Ct=Z*Z+J*J,Bt=K*K+v*v,Dt=V*V+tt*tt,D=.5-Ct,q=.5-Bt,W=.5-Dt;let ft=0,yt=0,xt=0;if(D>0){const k=ot(h,r)&31,R=st[k]*Z+rt[k]*J,Q=D*D*D*D;ft=R*Q}if(q>0){const k=ot(c,f)&31,R=st[k]*K+rt[k]*v,Q=q*q*q*q;yt=R*Q}if(W>0){const k=ot(y,p)&31,R=st[k]*V+rt[k]*tt,Q=W*W*W*W;xt=R*Q}return(ft+yt+xt)*49+.5}function $t(t){return t}function Ht(t){return t*t}function Xt(t){return t*(2-t)}function Gt(t){return t<.5?2*t*t:-1+(4-2*t)*t}function Yt(t){return t*t*t}function jt(t){return--t*t*t+1}function Zt(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1}function Jt(t){return t*t*t*t}function Kt(t){return 1- --t*t*t*t}function vt(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t}function Vt(t){return t*t*t*t*t}function tn(t){return 1+--t*t*t*t*t}function nn(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}function en(t){return 1-Math.cos(t*Math.PI/2)}function sn(t){return Math.sin(t*Math.PI/2)}function rn(t){return-(Math.cos(Math.PI*t)-1)/2}function on(t){return t===0?0:Math.pow(2,10*(t-1))}function an(t){return t===1?1:1-Math.pow(2,-10*t)}function cn(t){return t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2}function un(t){return 1-Math.sqrt(1-t*t)}function hn(t){return Math.sqrt(1- --t*t)}function ln(t){return t<.5?(1-Math.sqrt(1-4*t*t))/2:(Math.sqrt(1-(-2*t+2)*(-2*t+2))+1)/2}function dn(t){return t*t*((1.70158+1)*t-1.70158)}function fn(t){return 1+--t*t*((1.70158+1)*t+1.70158)}function yn(t){const n=2.5949095;return t<.5?4*t*t*((n+1)*2*t-n)/2:((2*t-2)*(2*t-2)*((n+1)*(t*2-2)+n)+2)/2}function xn(t){return t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*(2*Math.PI)/3)}function wn(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*(2*Math.PI)/3)+1}function mn(t){return t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5)/2+1}function gn(t){return 1-H(1-t)}function H(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Mn(t){return t<.5?(1-H(1-2*t))/2:(1+H(2*t-1))/2}var X;(t=>{t.width=600,t.left=100,t.right=500,t.gap=100,t.radius=8,t.increment=.006,t.text={x:300,size:19,gap:28},t.colors={background:"#141414",main:"#909090"}})(X||(X={}));const zn=[{name:"linear",f:$t},{name:"easeInQuad",f:Ht},{name:"easeOutQuad",f:Xt},{name:"easeInOutQuad",f:Gt},{name:"easeInCubic",f:Yt},{name:"easeOutCubic",f:jt},{name:"easeInOutCubic",f:Zt},{name:"easeInQuart",f:Jt},{name:"easeOutQuart",f:Kt},{name:"easeInOutQuart",f:vt},{name:"easeInQuint",f:Vt},{name:"easeOutQuint",f:tn},{name:"easeInOutQuint",f:nn},{name:"easeInSine",f:en},{name:"easeOutSine",f:sn},{name:"easeInOutSine",f:rn},{name:"easeInExpo",f:on},{name:"easeOutExpo",f:an},{name:"easeInOutExpo",f:cn},{name:"easeInCirc",f:un},{name:"easeOutCirc",f:hn},{name:"easeInOutCirc",f:ln},{name:"easeInBack",f:dn},{name:"easeOutBack",f:fn},{name:"easeInOutBack",f:yn},{name:"easeInElastic",f:xn},{name:"easeOutElastic",f:wn},{name:"easeInOutElastic",f:mn},{name:"easeInBounce",f:gn},{name:"easeOutBounce",f:H},{name:"easeInOutBounce",f:Mn}];X.gap+zn.length*X.gap;var m;(t=>{t.width=600,t.height=600,t.log={quadtrees:!1,displayedNodes:!1},t.force={maxVelocity:1/0,center:{active:!0,scalar:23e-5},repulsion:{active:!0,scalar:.054},attraction:{active:!0,scalar:1e-5,idealDistance:32},drag:{active:!0,scalar:.98}},t.render={background:{active:!0,color:"#111111"},node:{display:!0,color:"#909090",radius:6},connection:{display:!0,color:"#808080AA",width:2.5},quadtree:{display:!1,color:"#00EE00",width:.5},velocity:{display:!1,color:"#FF00FF",width:1,scalar:10},target:{node:"#FFCC11",connected:"#FFCC11",connection:"#FFBB11"}},t.quadtree={capacity:10},t.nodes={spawn:{active:!0,count:300},connect:{active:!0,chance:.5,count:{min:1,max:3}}}})(m||(m={}));var mt;(t=>{function n(){return new B({x:0,y:0,w:m.width,h:m.height},m.quadtree.capacity)}t.create=n;function s(a,h){for(const r of h){const l=a.insert(r);r.inQuadtree=l}}t.insertNodes=s;function o(a){a.leafRecursion(h=>{const r={x:0,y:0,mass:0};for(const l of h.container)r.x+=l.x,r.y+=l.y,r.mass+=1;if(h.divided)for(const l of h.children)l.data&&(r.x+=l.data.x*l.data.mass,r.y+=l.data.y*l.data.mass,r.mass+=l.data.mass);r.x=r.mass>0?r.x/r.mass:0,r.y=r.mass>0?r.y/r.mass:0,h.data=r})}t.setWeights=o})(mt||(mt={}));const at=1e-10,bn=new b(m.width,m.height).scale(.5);var gt;(t=>{function n(r){const l=b.subtract(bn,r.position).scale(m.force.center.scalar);r.velocity.add(l)}t.centerPull=n;function s(r){r.velocity.scale(m.force.drag.scalar)}t.drag=s;function o(r){const l=r.connectionsOut;if(!(l.size<=0))for(const d of l){const u=Math.max(b.distance(d.position,r.position),at),e=b.subtract(d.position,r.position),i=u-m.force.attraction.idealDistance,c=e.scale(i*m.force.attraction.scalar);r.velocity.add(c),d.velocity.add(c.scale(-1))}}t.attractConnections=o;function a(r,l){const d=b.subtract(r,l),e=1/Math.max(d.magnitude(),at);return d.scale(e).scale(e)}function h(r,l){const d=l.data;if(!d||d.mass<=0)return;const u=new b(d.x,d.y),e=Math.max(b.distanceSquared(r.position,u),at);if(l.rectangle.w**2/e<1){const f=a(r.position,u).scale(d.mass).scale(m.force.repulsion.scalar);r.velocity.add(f);return}if(l.divided){for(const f of l.children)h(r,f);return}for(const f of l.container){const y=a(r.position,f.position).scale(m.force.repulsion.scalar);r.velocity.add(y)}}t.repulsion=h})(gt||(gt={}));const En=m.force.maxVelocity**2;class Mt{constructor(n,s){M(this,"id");M(this,"position",b.Create.zero());M(this,"velocity",b.Create.zero());M(this,"connectionsOut",new Set);M(this,"connectionsIn",new Set);M(this,"inQuadtree",!1);this.id=n,this.position.copy(s)}get x(){return this.position.x}get y(){return this.position.y}limitVelocity(){this.velocity.magnitudeSquared()>En&&this.velocity.normalize().scale(m.force.maxVelocity)}move(){this.limitVelocity(),this.position.add(this.velocity)}connect(n){this.connectionsOut.add(n),n.connectionsIn.add(this)}}(t=>{function n(){const o=[],a=b.Create.zero();for(let h=0;h<m.nodes.spawn.count;h++)a.set(lt(0,m.width),lt(0,m.height)),o.push(new t(h,a));return o}t.spawnRandom=n;function s(o){for(const a of o){if(ht(1-m.nodes.connect.chance))continue;const h=dt(m.nodes.connect.count.min,m.nodes.connect.count.max);for(let r=0;r<h;r++){const l=o[dt(0,o.length-1)];l!==a&&a.connect(l)}}}t.connectRandom=s})(Mt||(Mt={}));const w={width:900,height:900,orbDuration:300,spellDuration:800,orbs:{x:510,y:30,boxWidth:80,boxHeight:180,gap:24},spells:{triple:{x:85,y:850,hintX:-14},double:{x:245,y:760,hintX:-7},single:{x:365,y:670},radius:30,hintScale:.2,hintGap:15,gap:80},colors:{background:"#151515",gray:"#AAAAAA",Q:"#11AAFF",W:"#CC11CC",E:"#FF6611"}},St=3,O=[],I={single:{Q:0,W:0,E:0},double:{QQ:0,WW:0,EE:0,QW:0,WE:0,QE:0},triple:{QQQ:0,WWW:0,EEE:0,QQW:0,QQE:0,QWW:0,WWE:0,QEE:0,WEE:0,QWE:0}};function pn(t){t.width=w.width,t.height=w.height;const n=t.getContext("2d");if(!n)throw"Cannot get 2d context";return Rt(n,w.height),n.lineWidth=1,n.strokeStyle=w.colors.gray,n}function In(){window.addEventListener("keydown",t=>{switch(t.key.toLowerCase()){case"q":{ct(0);break}case"w":{ct(1);break}case"e":{ct(2);break}case"r":{P();break}case"d":{P();break}case"f":{P();break}case"j":{P();break}case"k":{P();break}}})}function Nn(t){t.fillStyle=w.colors.background,t.fillRect(0,0,w.width,w.height)}function ct(t){O.unshift({type:t,duration:w.orbDuration}),O.length>St&&O.pop()}function P(){if(O.length<=0)return;const t=O.map(n=>n.type).sort().map(n=>{if(n===0)return"Q";if(n===1)return"W";if(n===2)return"E";throw new Error("Invalid type")}).join("");O.length=0,t.length===1&&(I.single[t]=w.spellDuration),t.length===2&&(I.double[t]=w.spellDuration),t.length===3&&(I.triple[t]=w.spellDuration)}function On(){for(const t of O)t.duration--,t.duration<=0&&O.pop()}function zt(t){if(t==0)return w.colors.Q;if(t==1)return w.colors.W;if(t==2)return w.colors.E;throw new Error("invalid color")}function ut(t){if(t=="Q")return w.colors.Q;if(t=="W")return w.colors.W;if(t=="E")return w.colors.E;throw new Error("invalid color")}function _n(t){const n=w.orbs;for(let s=0;s<St;s++)t.strokeRect(n.x-s*(n.boxWidth+n.gap),n.y,n.boxWidth,n.boxHeight);for(let s=0;s<O.length;s++){const o=O[s],a=1-o.duration/w.orbDuration;t.fillStyle=zt(o.type)+"50",t.fillRect(n.x-s*(n.boxWidth+n.gap),n.y,n.boxWidth,n.boxHeight),t.fillStyle=zt(o.type),t.fillRect(n.x-s*(n.boxWidth+n.gap),n.y,n.boxWidth,n.boxHeight-n.boxHeight*a)}}function Sn(t){const n=w.spells;Object.entries(I.single).forEach(([s,o],a)=>{nt(t,n.single.x+a*n.gap,n.single.y,n.radius);const h=s.split("");for(const r of h)t.fillStyle=ut(r),C(t,n.single.x+a*n.gap,n.single.y,n.radius*n.hintScale);o>0&&(t.fillStyle=w.colors.gray,C(t,n.single.x+a*n.gap,n.single.y,n.radius*et(0,1,o/w.spellDuration))),--I.single[s]<0&&(I.single[s]=0)}),Object.entries(I.double).forEach(([s,o],a)=>{nt(t,n.double.x+a*n.gap,n.double.y,n.radius);const h=s.split("");for(let r=0;r<h.length;r++){const l=h[r];t.fillStyle=ut(l),C(t,n.double.x+n.double.hintX+a*n.gap+r*n.hintGap,n.double.y,n.radius*n.hintScale)}o>0&&(t.fillStyle=w.colors.gray,C(t,n.double.x+a*n.gap,n.double.y,n.radius*et(0,1,o/w.spellDuration))),--I.double[s]<0&&(I.double[s]=0)}),Object.entries(I.triple).forEach(([s,o],a)=>{nt(t,n.triple.x+a*n.gap,n.triple.y,n.radius);const h=s.split("");for(let r=0;r<h.length;r++){const l=h[r];t.fillStyle=ut(l),C(t,n.triple.x+n.triple.hintX+a*n.gap+r*n.hintGap,n.triple.y,n.radius*n.hintScale)}o>0&&(t.fillStyle=w.colors.gray,C(t,n.triple.x+a*n.gap,n.triple.y,n.radius*et(0,1,o/w.spellDuration))),--I.triple[s]<0&&(I.triple[s]=0)})}function kn(t){In();const n=pn(t),s=()=>{On(),Nn(n),_n(n),Sn(n),requestAnimationFrame(s)};requestAnimationFrame(s)}var x;(t=>{let n;(s=>{s[s.RECTANGLE=0]="RECTANGLE",s[s.HEXAGON=1]="HEXAGON"})(n||(n={})),(s=>{s[s.EUCLIDEAN=0]="EUCLIDEAN",s[s.MANHATTAN=1]="MANHATTAN"})(t.DistanceMethod||(t.DistanceMethod={})),(s=>{s[s.ANIMATED=0]="ANIMATED",s[s.INSTANT=1]="INSTANT"})(t.Runtime||(t.Runtime={})),t.grid=0,t.runtime=0,t.width=600,t.height=600,t.cols=100,t.rows=100,t.cellWidth=t.width/t.cols,t.diagonals=!1,t.distanceMethod=0,t.weights={moveCost:1,distanceCost:1.5,terrainCost:0},t.animationStepIncrement=.03,t.colors={debug:"#FF00FF",empty:"#313244",block:"#11111B",rough:"#116611",open:"#B4BEFE",closed:"#89B4FA"},t.terrain={blocks:.36,rough:0,noiseScalar:.2}})(x||(x={}));const bt=x.cellWidth*.5;class E{constructor(n,s){M(this,"x");M(this,"y");M(this,"renderCenterPosition");M(this,"neighbors",[]);M(this,"type",E.Type.Empty);M(this,"list",E.List.None);M(this,"moveCost",0);M(this,"distanceCost",0);M(this,"terrainCost",0);M(this,"totalCost",0);M(this,"toRender",!0);M(this,"renderAnimationStep",1);this.x=n,this.y=s,this.renderCenterPosition=new b(n*x.cellWidth+bt,s*x.cellWidth+bt)}sumTotalCost(){this.totalCost=this.moveCost*x.weights.moveCost+this.terrainCost*x.weights.terrainCost+this.distanceCost*x.weights.distanceCost}setToRender(){this.toRender=!0,this.renderAnimationStep=0}isEqual(n){return this.x===n.x&&this.y===n.y}}(t=>{(n=>{n[n.Empty=0]="Empty",n[n.Rough=1]="Rough",n[n.Block=2]="Block"})(t.Type||(t.Type={})),(n=>{n[n.None=0]="None",n[n.Open=1]="Open",n[n.Closed=2]="Closed"})(t.List||(t.List={}))})(E||(E={}));var Et;(t=>{const n=new Set,s=new Set;t.hasEnded=!1;let o,a;function h(d,u){n.clear(),s.clear(),t.hasEnded=!1,o=d,a=u,n.add(o),o.list=E.List.Open}t.initiate=h;function r(){let d=null;for(const u of n)(!d||u.totalCost<d.totalCost)&&(d=u);return d}function l(){if(t.hasEnded)return;if(n.size<=0){t.hasEnded=!0;return}let d=r();if(d.isEqual(a)){t.hasEnded=!0,n.clear();return}n.delete(d),s.add(d),d.list=E.List.Closed,d.setToRender();for(const u of d.neighbors){if(!u)continue;const e=u.cell,i=u.moveCost;if(e.type===E.Type.Block||e.list===E.List.Closed)continue;const c=d.moveCost+i;e.list!==E.List.Open?(e.list=E.List.Open,e.setToRender(),n.add(e),e.moveCost=c,e.sumTotalCost()):c<=e.moveCost&&(e.moveCost=c,e.sumTotalCost())}}t.iterate=l})(Et||(Et={}));x.cellWidth*(2-Tt);var pt;(t=>{function n(r){for(const l of r)for(const d of l)ht(x.terrain.blocks)&&(d.type=E.Type.Block,d.toRender=!0)}t.randomBlocks=n;function s(r){for(let l=0;l<x.cols;l++)for(let d=0;d<x.rows;d++){const u=r[l][d];u.type!==E.Type.Block&&ht(x.terrain.rough)&&(u.type=E.Type.Rough,u.toRender=!0,u.terrainCost=1)}}t.randomRough=s;function o(r){const l=Math.random()*r.length;for(const d of r)for(const u of d)Lt((u.x+l)*x.terrain.noiseScalar,(u.y+l)*x.terrain.noiseScalar)<x.terrain.blocks&&(u.type=E.Type.Block,u.toRender=!0)}t.noiseBlocks=o;function a(){}t.noiseTerrain=a;function h(r,l,d){if(d<1)throw"Radius less than 1";const u=r.x-d,e=r.x+d,i=r.y-d,c=r.y+d;for(const f of l)for(const y of f)y&&y.x>=u&&y.x<=e&&y.y>=i&&y.y<=c&&(y.type=E.Type.Empty,y.toRender=!0)}t.unblockAroundCell=h})(pt||(pt={}));var It;(t=>{const n=[];function s(){for(let u=0;u<x.cols;u++){n.push([]);for(let e=0;e<x.rows;e++)n[u].push(new E(u,e))}return n}t.createCells=s;function o(u,e){return u>=0&&u<x.cols&&e>=0&&e<x.rows}function a(u,e){return o(u,e)?n[u][e]:null}function h(){for(let u=0;u<x.cols;u++)for(let e=0;e<x.rows;e++){const i=n[u][e],c=[],f=a(u,e-1),y=a(u+1,e),p=a(u,e+1),g=a(u-1,e);if(c.push(f?{cell:f,moveCost:1}:null,y?{cell:y,moveCost:1}:null,p?{cell:p,moveCost:1}:null,g?{cell:g,moveCost:1}:null),x.diagonals){const _=a(u+1,e-1),S=a(u+1,e+1),N=a(u-1,e+1),A=a(u-1,e+1);c.push(_?{cell:_,moveCost:F}:null,S?{cell:S,moveCost:F}:null,N?{cell:N,moveCost:F}:null,A?{cell:A,moveCost:F}:null)}i.neighbors.push(...c)}}function r(){for(let u=0;u<x.cols;u++)for(let e=0;e<x.rows;e++){const i=n[u][e],c=[],f=e%2===0,y=a(f?u:u+1,e-1),p=a(u+1,e),g=a(f?u:u+1,e+1),_=a(f?u-1:u,e+1),S=a(u-1,e),N=a(f?u-1:u,e-1);c.push(y?{cell:y,moveCost:1}:null,p?{cell:p,moveCost:1}:null,g?{cell:g,moveCost:1}:null,_?{cell:_,moveCost:1}:null,S?{cell:S,moveCost:1}:null,N?{cell:N,moveCost:1}:null),i.neighbors.push(...c)}}function l(){return x.grid===0?h():r()}t.setNeighbors=l;function d(u){for(const e of n)for(const i of e)x.distanceMethod===x.DistanceMethod.EUCLIDEAN?i.distanceCost=Pt(i.x,i.y,u.x,u.y):x.distanceMethod===x.DistanceMethod.MANHATTAN&&(i.distanceCost=Ut(i.x,i.y,u.x,u.y))}t.precalculateDistances=d})(It||(It={}));new Image;var z;(t=>{t.debug=!1,t.width=600,t.height=600,t.columns=130,t.walls=!0,t.spawnerSize=.04,t.limitFPS=!0,t.FPS=80,t.borderSize=-.02,t.maxSoakedCells=2,t.soakPerAbsorb=10,t.temperature={absoluteZero:0,waterFreeze:2700,normal:3e3,waterBoil:3700,woodBurn:8e3,metalMelt:15e3,sandMelt:19e3,maximum:3e4},t.temperatureSpawn={debug:3e3,empty:3e3,block:3e3,sand:3e3,water:3e3,ice:2e3,steam:3e3,fire:12e3},t.maxThermalTransfer={debug:-1,empty:100,block:1e3,sand:1e3,water:1e3,ice:1e3,steam:1e3,fire:1e3},t.density={debug:0,empty:0,block:9,sand:4,water:3,ice:9,steam:2,fire:1},t.spread={debug:0,empty:0,block:0,sand:1,water:2,ice:0,steam:3,fire:3},(n=>{n[n.NONE=-1]="NONE",n[n.NUM_0=0]="NUM_0",n[n.NUM_1=1]="NUM_1",n[n.NUM_2=2]="NUM_2",n[n.NUM_3=3]="NUM_3",n[n.NUM_4=4]="NUM_4",n[n.NUM_5=5]="NUM_5",n[n.NUM_6=6]="NUM_6",n[n.NUM_7=7]="NUM_7"})(t.SpawnKeys||(t.SpawnKeys={}))})(z||(z={}));var Nt;(t=>{const n=z.columns**2;function s(r){return r<z.columns||r>n-z.columns||r%z.columns==0||r%z.columns==z.columns-1}function o(){const r=[];for(let l=0;l<n;l++){const d=dt(0,100);r.push(d,0,0,0)}return r}t.generate0=o;function a(){const r=[];for(let l=0;l<n;l++){const d=z.walls&&s(l)?2:1;r.push(d,3e3,0,0)}return r}t.generate1=a;function h(){const r=[];for(let l=0;l<n;l++)r.push(0,0,0,0);return r}t.generate2=h})(Nt||(Nt={}));var Ot;(t=>{const n=b.Create.zero();let s=!1,o=z.SpawnKeys.NONE;function a(){return o}t.getSpawnKey=a;function h(){return n.x}t.getPointerX=h;function r(){return n.y}t.getPointerY=r;function l(){return s}t.getIsPointerDown=l;function d(c){e(c),i()}t.setup=d;function u(c){window.addEventListener("keydown",f=>{f.key.toLowerCase()==="d"&&c()})}t.setOnDebug=u;function e(c){c.addEventListener("pointermove",f=>{const y=c.getBoundingClientRect(),p=f.clientX-y.left,g=f.clientY-y.top;n.set(p/c.width,(c.height-g)/c.height)}),window.addEventListener("pointerdown",()=>{s=!0}),window.addEventListener("pointerup",()=>{s=!1}),window.addEventListener("blur",()=>{s=!1})}function i(){window.addEventListener("keydown",c=>{switch(c.key.toLowerCase()){case"0":o=z.SpawnKeys.NUM_0;break;case"1":o=z.SpawnKeys.NUM_1;break;case"2":o=z.SpawnKeys.NUM_2;break;case"3":o=z.SpawnKeys.NUM_3;break;case"4":o=z.SpawnKeys.NUM_4;break;case"5":o=z.SpawnKeys.NUM_5;break;case"6":o=z.SpawnKeys.NUM_6;break;case"7":o=z.SpawnKeys.NUM_7;break;case"r":window.location.reload();break}}),window.addEventListener("keyup",c=>{switch(c.key.toLowerCase()){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":o=z.SpawnKeys.NONE;break}})}})(Ot||(Ot={}));const kt="mainCanvas",At=document.getElementById(kt);if(!At)throw`Cannot get #${kt}`;kn(At);</script>
  </head>

  <body>
    <canvas id="mainCanvas"></canvas>
  </body>
</html>
